{% extends 'base.html' %}
{% block title %}drp — how it works{% endblock %}
{% block content %}
<div class="help-page">
  <h1>how it works</h1>

  <section>
    <h2>the idea</h2>
    <p>drp is a drop point for clipboards and files. Pick a key, drop something, share the link. A <strong>key</strong> is your address — whoever has it can reach the content.</p>
    <p>Clipboards and files live in separate namespaces so their keys never collide — but the short URL <code>/key</code> works for both.</p>
  </section>

  <section>
    <h2>namespaces</h2>
    <p>Every drop belongs to one of two namespaces:</p>
    <table class="ns-table">
      <tr><th>URL</th><th>Type</th><th>Expiry</th></tr>
      <tr><td><code>/key</code></td><td>clipboard (text)</td><td>activity-based — resets on each access</td></tr>
      <tr><td><code>/f/key</code></td><td>file</td><td>90 days from upload (anon)</td></tr>
    </table>
    <p>A clipboard and a file can share the same key name without conflict — <code>/notes</code> is a clipboard, <code>/f/notes</code> is a file. They live independently.</p>
  </section>

  <section>
    <h2>clipboard expiry (activity-based)</h2>
    <p>Clipboards don't expire on a fixed timer. They expire when nobody's looked at them for a while — like a pastebin that stays alive as long as people still care about it.</p>
    <table class="expiry-table">
      <tr><th>Tier</th><th>Idle timeout</th><th>Max lifetime</th></tr>
      <tr><td>Anonymous</td><td>24h since last access</td><td>7 days</td></tr>
      <tr><td>Free account</td><td>48h since last access</td><td>30 days</td></tr>
      <tr><td>Paid (Starter/Pro)</td><td>explicit date you pick</td><td>up to 1–3 years</td></tr>
    </table>
    <p>A clipboard you share in a team chat stays alive as long as people open it. When the activity stops, it goes away. The max lifetime cap prevents abuse.</p>
  </section>

  <section>
    <h2>file expiry</h2>
    <p>Anonymous files expire <strong>90 days after upload</strong> regardless of access. Paid accounts get explicit expiry dates and can renew.</p>
  </section>

  <section>
    <h2>locking</h2>
    <p>Anonymous drops have a <strong>24-hour protection window</strong> — nobody can overwrite or rename the key during that time. Use <code>-k</code> on upload to set your key right from the start. After 24h, you can rename with <code>drp mv</code>.</p>
    <p>Paid drops are locked to your account — only you can edit, rename, or delete them, permanently.</p>
  </section>

  <section>
    <h2>accounts</h2>
    <table class="plan-table">
      <tr><th></th><th>Anonymous</th><th>Free</th><th>Starter $3/mo</th><th>Pro $8/mo</th></tr>
      <tr><td>Max file</td><td>200MB</td><td>200MB</td><td>1GB</td><td>5GB</td></tr>
      <tr><td>Max clipboard</td><td>500KB</td><td>500KB</td><td>2MB</td><td>10MB</td></tr>
      <tr><td>Storage</td><td>—</td><td>—</td><td>5GB</td><td>20GB</td></tr>
      <tr><td>Clipboard idle</td><td>24h</td><td>48h</td><td>explicit</td><td>explicit</td></tr>
      <tr><td>Max lifetime</td><td>7 days</td><td>30 days</td><td>1 year</td><td>3 years</td></tr>
      <tr><td>Locked drops</td><td>✗</td><td>✗</td><td>✓</td><td>✓</td></tr>
      <tr><td>Renewable</td><td>✗</td><td>✗</td><td>✓</td><td>✓</td></tr>
    </table>
  </section>

  <section>
    <h2>cli</h2>
    <p>Install:</p>
    <pre><code>pip install drp-cli
drp setup</code></pre>

    <h3>uploading</h3>
    <pre><code>drp up "hello world"            # clipboard → /auto-key
drp up "hello world" -k hello   # clipboard at /hello
drp up config.yaml -k config    # file at /f/config
drp up report.pdf -k q3         # file at /f/q3</code></pre>
    <p>Text goes to <code>/key</code>, files go to <code>/f/key</code> — automatically.</p>

    <h3>getting</h3>
    <pre><code>drp get hello                   # print clipboard to stdout
drp get q3                      # download file to disk
drp get q3 -o my-report.pdf     # download and rename</code></pre>
    <p><code>drp get</code> never prompts for a password — drops are public by URL.</p>

    <h3>listing</h3>
    <pre><code>drp ls                          # short list
drp ls -l                       # long format: type, size, modified, expiry
drp ls -lh                      # long + human-readable sizes (1.2M, 300K)
drp ls -lh -t c                 # only clipboards
drp ls -lh -t f                 # only files
drp ls -lh --sort time          # sort by last modified
drp ls -lh --sort size -r       # sort by size, reversed
drp ls --export > backup.json   # export as JSON (requires login)</code></pre>

    <h3>managing</h3>
    <pre><code>drp rm hello                    # delete
drp mv q3 quarter3              # rename key (blocked 24h after creation)
drp renew q3                    # extend expiry (paid only)</code></pre>

    <h3>account & session</h3>
    <pre><code>drp login                       # log in (session saved locally)
drp logout                      # clear saved session
drp status                      # show host, account, session, cache info
drp ping                        # check server connectivity</code></pre>
    <p>Once logged in, the session is saved in <code>~/.config/drp/session.json</code> and reused silently. Run <code>drp logout</code> to clear it.</p>

    <h3>key tips</h3>
    <p>Always use <code>-k</code> when you want a memorable URL. Keys are locked for 24h after creation, so set them right on upload. If you forget, wait 24h and use <code>drp mv</code>.</p>
    <p>Clipboards and files can share a key name without conflict — <code>/notes</code> is always the clipboard, <code>/f/notes</code> is always the file.</p>
  </section>

  <section>
    <h2>privacy</h2>
    <p>drp is <a href="https://github.com/vicnasdev/drp">open source</a>. Files are stored on Cloudinary. Text is stored in a Postgres database. There is no encryption at rest — don't store secrets or sensitive data. A hard-to-guess key is your only protection for anonymous drops.</p>
  </section>

  <section>
    <h2>contact & issues</h2>
    <p>Questions, bugs, or feedback — <a href="https://github.com/vicnasdev/drp/issues">open an issue on GitHub</a>.</p>
  </section>

</div>
{% endblock %}